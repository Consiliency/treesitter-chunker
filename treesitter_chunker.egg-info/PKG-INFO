Metadata-Version: 2.4
Name: treesitter-chunker
Version: 0.1.0
Summary: Semantic code chunker using Tree-sitter for intelligent code analysis
Home-page: https://github.com/Consiliency/treesitter-chunker
Author: Consiliency
Author-email: Consiliency <dev@consiliency.com>
Maintainer-email: Consiliency <dev@consiliency.com>
License: MIT
Project-URL: Homepage, https://github.com/Consiliency/treesitter-chunker
Project-URL: Documentation, https://treesitter-chunker.readthedocs.io
Project-URL: Repository, https://github.com/Consiliency/treesitter-chunker
Project-URL: Issues, https://github.com/Consiliency/treesitter-chunker/issues
Project-URL: Changelog, https://github.com/Consiliency/treesitter-chunker/blob/main/CHANGELOG.md
Keywords: tree-sitter,code-analysis,chunking,parsing,ast,semantic-analysis
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Software Development :: Code Generators
Classifier: Topic :: Text Processing :: Linguistic
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Operating System :: OS Independent
Classifier: Operating System :: POSIX :: Linux
Classifier: Operating System :: MacOS :: MacOS X
Classifier: Operating System :: Microsoft :: Windows
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: tree_sitter
Requires-Dist: rich
Requires-Dist: typer
Requires-Dist: pyarrow>=11.0.0
Requires-Dist: toml
Requires-Dist: pyyaml
Requires-Dist: pygments
Requires-Dist: chardet
Provides-Extra: dev
Requires-Dist: pytest; extra == "dev"
Requires-Dist: psutil; extra == "dev"
<<<<<<< HEAD
Provides-Extra: viz
Requires-Dist: graphviz; extra == "viz"
=======
Requires-Dist: build; extra == "dev"
Requires-Dist: wheel; extra == "dev"
Requires-Dist: twine; extra == "dev"
Requires-Dist: pytest-cov; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: ruff; extra == "dev"
Requires-Dist: mypy; extra == "dev"
Provides-Extra: viz
Requires-Dist: graphviz; extra == "viz"
Provides-Extra: docs
Requires-Dist: sphinx; extra == "docs"
Requires-Dist: sphinx-rtd-theme; extra == "docs"
Requires-Dist: sphinx-autodoc-typehints; extra == "docs"
Provides-Extra: all
Requires-Dist: treesitter-chunker[dev,docs,viz]; extra == "all"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python
>>>>>>> 9b5b55f (Implement Phase 9 packaging and distribution)

# Tree-sitter Chunker

A high-performance semantic code chunker that leverages [Tree-sitter](https://tree-sitter.github.io/) parsers to intelligently split source code into meaningful chunks like functions, classes, and methods.

[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)]()
[![Tree-sitter](https://img.shields.io/badge/tree--sitter-latest-green.svg)]()

## âœ¨ Key Features

- ğŸ¯ **Semantic Understanding** - Extracts functions, classes, methods based on AST
- ğŸš€ **Blazing Fast** - 11.9x speedup with intelligent AST caching
- ğŸ”Œ **Plugin Architecture** - Built-in support for Python, JavaScript, Rust, C, C++
- ğŸ›ï¸ **Flexible Configuration** - TOML/YAML/JSON config files with per-language settings
- ğŸ“Š **Multiple Export Formats** - JSON, JSONL, and Parquet with compression
- âš¡ **Parallel Processing** - Process entire codebases with configurable workers
- ğŸŒŠ **Streaming Support** - Handle files larger than memory
- ğŸ¨ **Rich CLI** - Progress bars, batch processing, and filtering

## ğŸ“¦ Installation

### Prerequisites
- Python 3.8+
- C compiler (for building Tree-sitter grammars)
- `uv` package manager (recommended) or pip

### Quick Install

```bash
# Clone the repository
git clone https://github.com/yourusername/treesitter-chunker.git
cd treesitter-chunker

# Install with uv (recommended)
uv venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate
uv pip install -e ".[dev]"
uv pip install git+https://github.com/tree-sitter/py-tree-sitter.git

# Build language grammars
python scripts/fetch_grammars.py
python scripts/build_lib.py

# Verify installation
python -c "from chunker import list_languages; print(list_languages())"
# Output: ['c', 'cpp', 'javascript', 'python', 'rust']
```

## ğŸš€ Quick Start

### Basic Usage

```python
from chunker import chunk_file

# Extract chunks from a Python file
chunks = chunk_file("example.py", "python")

for chunk in chunks:
    print(f"{chunk.node_type} at lines {chunk.start_line}-{chunk.end_line}")
    print(f"  Context: {chunk.parent_context or 'module level'}")
```

### Using Plugins

```python
from chunker import chunk_file, get_plugin_manager

# Load built-in language plugins
manager = get_plugin_manager()
manager.load_built_in_plugins()

# Now chunking uses plugin-based rules
chunks = chunk_file("example.py", "python")
```

### Parallel Processing

```python
from chunker import chunk_files_parallel, chunk_directory_parallel

# Process multiple files in parallel
results = chunk_files_parallel(
    ["file1.py", "file2.py", "file3.py"],
    "python",
    max_workers=4,
    show_progress=True
)

# Process entire directory
results = chunk_directory_parallel(
    "src/",
    "python",
    pattern="**/*.py"
)
```

### Export Formats

```python
from chunker import chunk_file
from chunker.export import JSONExporter, JSONLExporter, SchemaType
from chunker.exporters import ParquetExporter

chunks = chunk_file("example.py", "python")

# Export to JSON with nested schema
json_exporter = JSONExporter(schema_type=SchemaType.NESTED)
json_exporter.export(chunks, "chunks.json")

# Export to JSONL for streaming
jsonl_exporter = JSONLExporter()
jsonl_exporter.export(chunks, "chunks.jsonl")

# Export to Parquet for analytics
parquet_exporter = ParquetExporter(compression="snappy")
parquet_exporter.export(chunks, "chunks.parquet")
```

### CLI Usage

```bash
# Basic chunking
python cli/main.py chunk example.py -l python

# Process directory with progress bar
python cli/main.py chunk src/ -l python --recursive --progress

# Export as JSON
python cli/main.py chunk example.py -l python --json > chunks.json

# With configuration file
python cli/main.py chunk src/ --config .chunkerrc
```

## ğŸ¯ Features

### Plugin Architecture

The chunker uses a flexible plugin system for language support:

- **Built-in Plugins**: Python, JavaScript, Rust, C, C++
- **Custom Plugins**: Easy to add new languages
- **Configuration**: Per-language chunk types and rules
- **Hot Loading**: Load plugins from directories

### Performance Features

- **AST Caching**: 11.9x speedup for repeated processing
- **Parallel Processing**: Utilize multiple CPU cores
- **Streaming**: Process files larger than memory
- **Progress Tracking**: Rich progress bars with ETA

### Configuration System

Support for multiple configuration formats:

```toml
# .chunkerrc
min_chunk_size = 3
max_chunk_size = 300

[languages.python]
chunk_types = ["function_definition", "class_definition", "async_function_definition"]
min_chunk_size = 5
```

### Export Formats

- **JSON**: Human-readable, supports nested/flat/relational schemas
- **JSONL**: Line-delimited JSON for streaming
- **Parquet**: Columnar format for analytics with compression

## ğŸ“š API Overview

Tree-sitter Chunker exports 27 APIs organized into logical groups:

### Core Functions
- `chunk_file()` - Extract chunks from a file
- `CodeChunk` - Data class representing a chunk

### Parser Management
- `get_parser()` - Get parser for a language
- `list_languages()` - List available languages
- `get_language_info()` - Get language metadata
- `return_parser()` - Return parser to pool
- `clear_cache()` - Clear parser cache

### Plugin System
- `PluginManager` - Manage language plugins
- `LanguagePlugin` - Base class for plugins
- `PluginConfig` - Plugin configuration
- `get_plugin_manager()` - Get global plugin manager

### Performance Features
- `chunk_files_parallel()` - Process files in parallel
- `chunk_directory_parallel()` - Process directories
- `chunk_file_streaming()` - Stream large files
- `ASTCache` - Cache parsed ASTs
- `StreamingChunker` - Streaming chunker class
- `ParallelChunker` - Parallel processing class

### Configuration
- `ChunkerConfig` - Global configuration
- `LanguageConfig` - Language-specific config
- `CompositeLanguageConfig` - Config inheritance
- `ChunkRule` - Custom chunking rules

### Export System
- `JSONExporter` - Export to JSON
- `JSONLExporter` - Export to JSONL
- `ParquetExporter` - Export to Parquet
- `SchemaType` - Export schema types

### Error Handling
- `ChunkerError` - Base exception
- `LanguageNotFoundError` - Language not supported
- `ParserError` - Parser configuration error
- `LibraryNotFoundError` - Missing language library

See the [API Reference](docs/api-reference.md) for detailed documentation.

## ğŸ“– Documentation

- **[Getting Started](docs/getting-started.md)** - Installation and first steps
- **[User Guide](docs/user-guide.md)** - Comprehensive usage guide
- **[API Reference](docs/api-reference.md)** - Detailed API documentation
- **[Plugin Development](docs/plugin-development.md)** - Create custom language plugins
- **[Configuration Guide](docs/configuration.md)** - Configuration options
- **[Performance Guide](docs/performance-guide.md)** - Optimization strategies
- **[Export Formats](docs/export-formats.md)** - Export format details
- **[Cookbook](docs/cookbook.md)** - Practical recipes and examples
- **[Architecture](docs/architecture.md)** - System design and internals

## ğŸ“ Project Structure

```
treesitter-chunker/
â”œâ”€â”€ chunker/              # Core library
â”‚   â”œâ”€â”€ __init__.py      # Main exports (27 APIs)
â”‚   â”œâ”€â”€ chunker.py       # Core chunking logic
â”‚   â”œâ”€â”€ parser.py        # Parser management
â”‚   â”œâ”€â”€ plugin_manager.py # Plugin system
â”‚   â”œâ”€â”€ languages/       # Language plugins
â”‚   â”œâ”€â”€ export/          # Export formats
â”‚   â”œâ”€â”€ parallel.py      # Parallel processing
â”‚   â”œâ”€â”€ streaming.py     # Streaming support
â”‚   â””â”€â”€ cache.py         # AST caching
â”œâ”€â”€ cli/                 # Command-line interface
â”œâ”€â”€ docs/                # Documentation
â”œâ”€â”€ tests/               # Test suite
â”œâ”€â”€ examples/            # Example files
â””â”€â”€ scripts/             # Build scripts
```

## ğŸ¤ Contributing

Contributions are welcome! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Development Setup

```bash
# Clone and install in development mode
git clone https://github.com/yourusername/treesitter-chunker.git
cd treesitter-chunker
uv pip install -e ".[dev]"

# Run tests (558 tests, >95% coverage)
python -m pytest

# Run benchmarks
python benchmarks/run_benchmarks.py
```

### Test Suite

The project includes a comprehensive test suite with excellent coverage:
- **Total tests**: 603 (558 original + 45 Phase 7)
- **Test files**: 39 (33 original + 6 Phase 7)
- **Unit test coverage**: >95%
- **Integration test coverage**: ~80% (increased from ~40%)
- **Status**: All tests passing (590 passed, 13 skipped for unimplemented features)

**Phase 7 Completed**: Successfully implemented cross-module integration testing with proper error propagation, thread safety verification, and resource management across all module boundaries.

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

Built on top of the excellent [Tree-sitter](https://tree-sitter.github.io/) parsing library.
